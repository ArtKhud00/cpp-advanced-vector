# cpp-advanced-vector
В данном задании была реализована улучшенная версия контейнера vector

## Сравнение с simple-vector
По сравнению с классом vector наивная реализация показывает себя хуже. при выполнении `PushBack` у заполненного контейнера `SimpleVector` не просто выделяет вдвое больший объём памяти в куче, но и инициализирует её значениями по умолчанию. Такова особенность работы операции `new[]`. Затем значения массива из прежней области памяти копируются, поэтому элементам присваиваются новые значения.
Класс `vector` действует умнее: он просто резервирует «сырую» память, а элементы конструирует в ней только по мере надобности. Ещё `vector` по возможности использует операцию перемещения объектов, а не копирования. Перемещение «тяжёлого»‎ объекта часто эффективнее, чем копирование.
Использование оператора `new[]` привязывает `SimpleVector` к конструктору по умолчанию и имеет ещё один отрицательный эффект — в `SimpleVector` не получится хранить объекты, не имеющие конструктора по умолчанию

## Реализация функционала advanced-vector
### Внутренне представление
Класс хранит указатель на область памяти, в которой непрерывным блоком размещаются элементы динамического массива, вместимость вектора и его размер.
### Упрощение внутренней структуры класса
Для работы с сырой памятью был создан отдельный класс-обёртка `RawMemory`. Шаблонный класс `RawMemory` будет отвечать за хранение буфера, который вмещает заданное количество элементов, и предоставлять доступ к элементам по индексу. Класс занимается выделением и освобождением памяти.
Операция копирования не имеет смысла для класса RawMemory, так как у него нет информации о количестве находящихся в сырой памяти элементов. Конструктор копирования и копирующий оператор присваивания в классе `RawMemory` запрещены. В классе используются перемещающие конструктор и оператор присваивания.

### Методы класса Vector
 - Конструктор по умолчанию. Инициализирует вектор нулевого размера и вместимости. Не выбрасывает исключений. Алгоритмическая сложность: `O(1)`.
 - Конструктор, который создаёт вектор заданного размера. Вместимость созданного вектора равна его размеру, а элементы проинициализированы значением по умолчанию для типа T. Алгоритмическая сложность: O(размер вектора).
 - Копирующий конструктор. Создаёт копию элементов исходного вектора. Имеет вместимость, равную размеру исходного вектора, то есть выделяет память без запаса. Алгоритмическая сложность: O(размер исходного вектора).
 - Оператор `[]` обеспечивает доступ к элементам вектора и имеет две версии. В константном операторе `[]` используется оператор  `const_cast`, чтобы снять константность с ссылки на текущий объект и вызвать неконстантную версию оператора `[]`. 
 - `Size` - возвращает размер вектора
 - `Capacity` - возвращает вместимость вектора
 - `DestroyN` - вспомогательный метод для разрушения массивов объектов в сырой памяти. Вызвыает деструкторы n объектов массива по адресу buf
 - `CopyConstruct` - вспомогательный метод для конструирования массивов объектов в сырой памяти. Создаёт копию объекта elem в сырой памяти по адресу buf
 - `Reserve` - предназначен для заблаговременного резервирования памяти под элементы вектора, когда известно их примерное количество. Если требуемая вместимость больше текущей, `Reserve` выделяет нужный объём сырой памяти.
 - `Resize` - изменяет количество элементов в векторе. Возможны два сценария:
	 - уменьшение размера вектора,
	 - увеличение размера вектора.
 - `PushBack` - добавляет новое значение в конец вектора. При нехватке памяти стандартный `vector` увеличивает вместимость в кратное число раз.
 - `PopBack` - разрушает последний элемент вектора и уменьшает размер вектора на единицу. Как и в случае стандартного вектора, вызов `PopBack` на пустом векторе приводит к неопределённому поведению.
 - `EmplaceBack` - более эффективный метод вставки элементов в вектор. Данный метод позволяет добавить элемент в контейнер без создания промежуточного объекта. Метод EmplaceBack должен предоставлять строгую гарантию безопасности исключений, когда выполняется любое из условий:
     - move-конструктор у типа `T` объявлен как `noexcept`;
     - тип `T` имеет публичный конструктор копирования.
Если у типа T нет конструктора копирования и move-конструктор может выбрасывать исключения, метод EmplaceBack должен предоставлять базовую гарантию безопасности исключений.
 - `Insert` - вставляет элемент в заданную позицию вектора.  Подобно `EmplaceBack` и `PushBack`, метод `Insert` допускает вставку элемента вектора внутрь того же самого вектора
 - `Emplace` - осуществляет вставку элемента в заданную позицию вектора по похожему алгоритму как в методе `Insert`.  Основное отличие от `Insert` в том, что `Emplace` для передачи своих параметров конструктору элемента использует perfect forwarding
 - `Erase` - удаляет элемент, на который указывает переданный итератор. 